<!DOCTYPE html>
<html lang="en">
<!-- EJS head partial -->
<%- include('partials/head.ejs'), {title: title}%>
<body>
	<div class="container">
		<!-- Express snippet to include the header and navigation from a partial -->
		<%- include('partials/nav.ejs') %>
		<!-- Page content begins below this -->
		<h1><%- heading %></h1>
		<!-- Render a confirmation message if action was succesful -->
		<% if (editResult == "success") { %>
		<div class="alert alert-success" role="alert">Your grade was successfully edited.</div>
		<% } %>
		<!-- Rendering validation errors if any -->
        <% if(editResult && editResult != "success") { %>
			<div class="alert alert-danger" role="alert"><%= editResult %></div>
        <% } %>
		<!-- Form for editing grades -->
		<form action="/edit_grades" method="POST" class="mb-4">
			<div class="form-group">
				<label for="module">Module</label>
				<select class="form-control selectpicker" data-live-search="true" id="grade_id" name="grade_id"
					title="Choose a module..." required>
					<% grades_res.forEach(function (gr) { %>
					<option value="<%= gr.grade_id %>"><%= gr.course_title %></option>
					<% }); %>
				</select>
			<div class="form-group">
				<label for="session">Session</label>
				<select class="form-control selectpicker" data-live-search="true" id="session" name="session"
					title="Choose a session..." required>
					<% sessions_res.forEach(function (sr) { %>
						<option value="<%= sr.id %>"><%= sr.title %></option>
					<% }); %>
				</select>
			</div>
			<div class="form-group">
				<label for="grade">Grade</label>
				<input
					class="form-control"
					type="number"
					id="grade"
					name="grade"
					min="40"
					max="100"
					required
				/>
			</div>
			<div class="form-check">
				<input 
					type="checkbox" 
					class="form-check-input" 
					id="anonymous"
					name="anonymous"
					checked
				/>
				<label class="form-check-label" for="exampleCheck1">Do not reveal my identity in leaderboard. Keep this grade anonymous.</label>
			</div>
			<input class="btn btn-primary mt-4" type="submit" value="Update"/>
		</form>
	</div>
	<%- include('partials/footer.ejs') %>
</body>
<!-- Optional JavaScript -->
<!-- Bootstrap Requirements -->
<%- include('partials/bootstrap_reqs.ejs') %>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
</html>